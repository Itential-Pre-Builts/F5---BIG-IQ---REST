{
  "name": "Rollback BIG-IP Device - F5 - BIG-IP",
  "tasks": {
    "3646": {
      "name": "childJob",
      "canvasName": "childJob",
      "summary": "Reboot Device",
      "description": "Reboot device",
      "location": "Application",
      "locationType": null,
      "app": "WorkFlowEngine",
      "type": "operation",
      "displayName": "WorkFlowEngine",
      "variables": {
        "incoming": {
          "task": "",
          "workflow": "Reboot BIG-IP Device - F5 - BIG-IQ",
          "variables": {},
          "data_array": "$var.job.rebootDeviceInputs",
          "transformation": "",
          "loopType": "sequential"
        },
        "outgoing": {
          "job_details": ""
        }
      },
      "actor": "job",
      "groups": [],
      "nodeLocation": {
        "x": -672,
        "y": -36
      }
    },
    "4002": {
      "name": "stub",
      "canvasName": "stub",
      "summary": "Return Failed Status",
      "description": "Return failed status",
      "location": "Application",
      "locationType": null,
      "app": "WorkFlowEngine",
      "type": "automatic",
      "displayName": "Tools",
      "variables": {
        "incoming": {
          "type": "success",
          "delay": "",
          "response": "FAILED"
        },
        "outgoing": {
          "response": "$var.job.returnStatus"
        }
      },
      "actor": "Pronghorn",
      "groups": [],
      "nodeLocation": {
        "x": 1620,
        "y": 204
      }
    },
    "7176": {
      "name": "stub",
      "canvasName": "stub",
      "summary": "Initialize Return Status",
      "description": "Initialize return status",
      "location": "Application",
      "locationType": null,
      "app": "WorkFlowEngine",
      "type": "automatic",
      "displayName": "Tools",
      "variables": {
        "incoming": {
          "type": "success",
          "delay": "",
          "response": "SUCCESS"
        },
        "outgoing": {
          "response": "$var.job.returnStatus"
        }
      },
      "actor": "Pronghorn",
      "groups": [],
      "nodeLocation": {
        "x": -996,
        "y": -36
      }
    },
    "9867": {
      "name": "evaluation",
      "canvasName": "evaluation",
      "summary": "Verify Device Import Succeeded",
      "description": "Run an evaluation",
      "location": "Application",
      "locationType": null,
      "app": "WorkFlowEngine",
      "type": "operation",
      "displayName": "WorkFlowEngine",
      "variables": {
        "incoming": {
          "all_true_flag": false,
          "evaluation_groups": [
            {
              "all_true_flag": false,
              "evaluations": [
                {
                  "operand_1": {
                    "task": "a0ee",
                    "variable": "job_details"
                  },
                  "operand_2": {
                    "task": "static",
                    "variable": 1
                  },
                  "operator": "<",
                  "query": "loop[*returnStatus=FAILED]",
                  "rightQuery": ""
                }
              ]
            }
          ]
        },
        "outgoing": {
          "return_value": ""
        }
      },
      "actor": "Pronghorn",
      "groups": [],
      "nodeLocation": {
        "x": 1296,
        "y": -36
      }
    },
    "workflow_start": {
      "name": "workflow_start",
      "groups": [],
      "nodeLocation": {
        "x": -1236,
        "y": -36
      },
      "x": 0,
      "y": 0.5
    },
    "workflow_end": {
      "name": "workflow_end",
      "groups": [],
      "nodeLocation": {
        "x": 1620,
        "y": -36
      },
      "x": 1,
      "y": 0.5
    },
    "04c8": {
      "name": "evaluation",
      "canvasName": "evaluation",
      "summary": "Verify Reboot Succeeded",
      "description": "Run an evaluation",
      "location": "Application",
      "locationType": null,
      "app": "WorkFlowEngine",
      "type": "operation",
      "displayName": "WorkFlowEngine",
      "variables": {
        "incoming": {
          "all_true_flag": false,
          "evaluation_groups": [
            {
              "all_true_flag": false,
              "evaluations": [
                {
                  "operand_1": {
                    "task": "3646",
                    "variable": "job_details"
                  },
                  "operand_2": {
                    "task": "static",
                    "variable": 1
                  },
                  "operator": "<",
                  "query": "loop[*returnStatus=FAILED]",
                  "rightQuery": ""
                }
              ]
            }
          ]
        },
        "outgoing": {
          "return_value": ""
        }
      },
      "actor": "Pronghorn",
      "groups": [],
      "nodeLocation": {
        "x": 0,
        "y": -36
      }
    },
    "761f": {
      "name": "childJob",
      "canvasName": "childJob",
      "summary": "Discover Device",
      "description": "Discover device over BIG-IQ",
      "location": "Application",
      "locationType": null,
      "app": "WorkFlowEngine",
      "type": "operation",
      "displayName": "WorkFlowEngine",
      "variables": {
        "incoming": {
          "task": "",
          "workflow": "Discover BIG-IP Device - F5 - BIG-IQ",
          "variables": {
            "adapterId": {
              "task": "04c8",
              "value": "return_value"
            },
            "_id": {
              "task": "static",
              "value": ""
            },
            "machineId": {
              "task": "04c8",
              "value": "return_value"
            }
          },
          "data_array": "$var.job.discoverDeviceInputs",
          "transformation": "",
          "loopType": "sequential"
        },
        "outgoing": {
          "job_details": ""
        }
      },
      "actor": "job",
      "groups": [],
      "nodeLocation": {
        "x": 312,
        "y": -36
      }
    },
    "a341": {
      "name": "evaluation",
      "canvasName": "evaluation",
      "summary": "Verify Device Discovery Succeeded",
      "description": "Run an evaluation",
      "location": "Application",
      "locationType": null,
      "app": "WorkFlowEngine",
      "type": "operation",
      "displayName": "WorkFlowEngine",
      "variables": {
        "incoming": {
          "all_true_flag": false,
          "evaluation_groups": [
            {
              "all_true_flag": false,
              "evaluations": [
                {
                  "operand_1": {
                    "task": "761f",
                    "variable": "job_details"
                  },
                  "operand_2": {
                    "task": "static",
                    "variable": 1
                  },
                  "operator": "<",
                  "query": "loop[*returnStatus=FAILED]",
                  "rightQuery": ""
                }
              ]
            }
          ]
        },
        "outgoing": {
          "return_value": ""
        }
      },
      "actor": "Pronghorn",
      "groups": [],
      "nodeLocation": {
        "x": 624,
        "y": -36
      }
    },
    "a0ee": {
      "name": "childJob",
      "canvasName": "childJob",
      "summary": "Import Device",
      "description": "Import device",
      "location": "Application",
      "locationType": null,
      "app": "WorkFlowEngine",
      "type": "operation",
      "displayName": "WorkFlowEngine",
      "variables": {
        "incoming": {
          "task": "",
          "workflow": "Import BIG-IP Device - F5 - BIG-IQ",
          "variables": {
            "machineId": {
              "task": "a341",
              "value": "return_value"
            },
            "importDeviceTaskName": {
              "task": "a341",
              "value": "return_value"
            }
          },
          "data_array": "$var.job.importDeviceInputs",
          "transformation": "",
          "loopType": "sequential"
        },
        "outgoing": {
          "job_details": ""
        }
      },
      "actor": "job",
      "groups": [],
      "nodeLocation": {
        "x": 960,
        "y": -36
      }
    },
    "6dc8": {
      "name": "stub",
      "canvasName": "stub",
      "summary": "Failure Path",
      "description": "Failure Path",
      "location": "Application",
      "locationType": null,
      "app": "WorkFlowEngine",
      "type": "automatic",
      "displayName": "Tools",
      "variables": {
        "incoming": {
          "type": "success",
          "delay": "",
          "response": ""
        },
        "outgoing": {
          "response": null
        }
      },
      "actor": "Pronghorn",
      "groups": [],
      "nodeLocation": {
        "x": 0,
        "y": 204
      }
    },
    "db5c": {
      "name": "stub",
      "canvasName": "stub",
      "summary": "Failure Path",
      "description": "Failure Path",
      "location": "Application",
      "locationType": null,
      "app": "WorkFlowEngine",
      "type": "automatic",
      "displayName": "Tools",
      "variables": {
        "incoming": {
          "type": "success",
          "delay": "",
          "response": ""
        },
        "outgoing": {
          "response": null
        }
      },
      "actor": "Pronghorn",
      "groups": [],
      "nodeLocation": {
        "x": 624,
        "y": 204
      }
    },
    "82ea": {
      "name": "stub",
      "canvasName": "stub",
      "summary": "Return Failed Status",
      "description": "Return failed status",
      "location": "Application",
      "locationType": null,
      "app": "WorkFlowEngine",
      "type": "automatic",
      "displayName": "Tools",
      "variables": {
        "incoming": {
          "type": "success",
          "delay": "",
          "response": "FAILED"
        },
        "outgoing": {
          "response": "$var.job.returnStatus"
        }
      },
      "actor": "Pronghorn",
      "groups": [],
      "nodeLocation": {
        "x": 1296,
        "y": 204
      }
    },
    "ee4c": {
      "name": "delay",
      "canvasName": "delay",
      "summary": "Wait for device reboot",
      "description": "Wait for device reboot",
      "location": "Application",
      "locationType": null,
      "app": "WorkFlowEngine",
      "type": "operation",
      "displayName": "WorkFlowEngine",
      "variables": {
        "incoming": {
          "time": "$var.job.deviceRebootWait"
        },
        "outgoing": {
          "time_in_milliseconds": ""
        }
      },
      "actor": "Pronghorn",
      "groups": [],
      "nodeLocation": {
        "x": -336,
        "y": -36
      }
    }
  },
  "transitions": {
    "3646": {
      "ee4c": {
        "state": "success",
        "type": "standard"
      }
    },
    "4002": {
      "workflow_end": {
        "state": "success",
        "type": "standard"
      }
    },
    "7176": {
      "3646": {
        "state": "success",
        "type": "standard"
      }
    },
    "9867": {
      "workflow_end": {
        "state": "success",
        "type": "standard"
      },
      "82ea": {
        "type": "standard",
        "state": "failure"
      }
    },
    "workflow_start": {
      "7176": {
        "state": "success",
        "type": "standard"
      }
    },
    "workflow_end": {},
    "04c8": {
      "761f": {
        "state": "success",
        "type": "standard"
      },
      "6dc8": {
        "type": "standard",
        "state": "failure"
      }
    },
    "761f": {
      "a341": {
        "state": "success",
        "type": "standard"
      }
    },
    "a341": {
      "a0ee": {
        "state": "success",
        "type": "standard"
      },
      "db5c": {
        "type": "standard",
        "state": "failure"
      }
    },
    "a0ee": {
      "9867": {
        "state": "success",
        "type": "standard"
      }
    },
    "6dc8": {
      "db5c": {
        "state": "success",
        "type": "standard"
      }
    },
    "db5c": {
      "82ea": {
        "state": "success",
        "type": "standard"
      }
    },
    "82ea": {
      "4002": {
        "state": "success",
        "type": "standard"
      }
    },
    "ee4c": {
      "04c8": {
        "state": "success",
        "type": "standard"
      }
    }
  },
  "inputSchema": {
    "type": "object",
    "properties": {
      "rebootDeviceInputs": {
        "type": [
          "array"
        ]
      },
      "discoverDeviceInputs": {
        "type": [
          "array"
        ]
      },
      "importDeviceInputs": {
        "type": [
          "array"
        ]
      },
      "deviceRebootWait": {
        "title": "time",
        "type": "integer",
        "minimum": 1,
        "examples": [
          1200
        ]
      }
    },
    "required": [
      "rebootDeviceInputs",
      "discoverDeviceInputs",
      "importDeviceInputs",
      "deviceRebootWait"
    ]
  },
  "outputSchema": {
    "type": "object",
    "properties": {
      "rebootDeviceInputs": {
        "type": [
          "array"
        ]
      },
      "discoverDeviceInputs": {
        "type": [
          "array"
        ]
      },
      "importDeviceInputs": {
        "type": [
          "array"
        ]
      },
      "deviceRebootWait": {
        "title": "time",
        "type": "integer",
        "minimum": 1,
        "examples": [
          1200
        ]
      },
      "_id": {
        "type": "string",
        "pattern": "^[0-9a-f]{24}$"
      },
      "initiator": {
        "type": "string"
      },
      "returnStatus": {
        "title": "response",
        "type": "string",
        "examples": [
          "awesome"
        ]
      }
    }
  },
  "type": "automation",
  "font_size": 12,
  "errorHandler": null,
  "preAutomationTime": 0,
  "sla": 0,
  "last_updated": "2023-09-27T18:17:19.771Z",
  "lastUpdatedVersion": "5.46.0-2023.1.19.0",
  "created": "2023-09-27T17:21:50.570Z",
  "created_by": {
    "provenance": "local_aaa",
    "username": "admin@pronghorn",
    "firstname": "admin",
    "inactive": false
  },
  "createdVersion": "5.46.0-2023.1.19.0",
  "canvasVersion": 3,
  "last_updated_by": {
    "provenance": "local_aaa",
    "username": "admin@pronghorn",
    "firstname": "admin",
    "inactive": false
  },
  "tags": [],
  "groups": [],
  "migrationVersion": 2
}